<style>
.centered {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 0 auto;
}
.centered h2 {
  text-align: center;
}
.centered .button-row {
  margin-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
}
.centered .review-list {
  width: 100%;
  max-width: 600px;
  padding: 0;
  list-style: none;
}
.centered .review-card {
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.07);
  padding: 18px 26px;
  margin-bottom: 22px;
  text-align: left;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.centered .review-details {
  flex: 1 1 auto;
}
.centered .delete-btn-box {
  margin-left: 16px;
}
.centered .btn {
  margin-bottom: 6px;
}
</style>

<div class="centered">

  <h2>
    <% case params[:filter] %>
    <% when "written_by_me" %>
      Reviews I Wrote
    <% when "about_me_vendor" %>
      Reviews About Me
    <% else %>
      All Reviews
    <% end %>
  </h2>

  <div class="button-row">
    <%= form_with url: reviews_path, method: :get, local: true do %>

      <%= text_field_tag :q,
        params[:q],
        placeholder: "Search reviews...",
        class: "form-control",
        style: "width: 260px;" %>
    <% end %>
  </div>

  <div class="button-row">
    <%= form_with url: reviews_path, method: :get, local: true do %>
      <%= select_tag :filter,
        options_for_select(
          [
            ['All Reviews', nil],
            ['Reviews About Me (Vendor)', 'about_me_vendor'],
            ['Reviews I Wrote', 'written_by_me']
          ],
          params[:filter]
        ),
        class: 'form-control',
        style: 'width: 260px;',
        onchange: 'this.form.submit();' %>
    <% end %>

    <%= link_to 'Write a New Review',
      new_review_path,
      class: 'btn btn-primary' %>
  </div>

  <ul class="review-list">
    <% @reviews.each do |review| %>
      <li class="review-card" id="review_<%= review.id %>">

        <div class="review-details">
          <strong>Vendor Name:</strong> <%= review.vendor_name %><br>
          <strong>Service:</strong> <%= review.title %><br>
          <strong>Rating:</strong> <%= review.rating %><br>
          <strong>Comment:</strong> <%= review.comment %>
        </div>

        <% if params[:filter] == "written_by_me" %>
          <%= link_to 'Edit',
            edit_review_path(review),
            class: 'btn btn-secondary',
            id: "review-#{review.id}-edit" %>

          <div class="delete-btn-box">
            <%= link_to 'Delete',
              review_path(review),
              method: :delete,
              data: { confirm: 'Are you sure you want to delete this review?' },
              class: 'btn btn-danger',
              id: "review-#{review.id}-delete" %>
          </div>
        <% end %>

      </li>
    <% end %>
  </ul>

</div>
